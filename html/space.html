<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Aakash</title>
  <style>
    body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; }
    #canvas { position: absolute; inset: 0; z-index: 1; }
    #cursor-dot {
      width: 8px; height: 8px; background-color: rgba(174,0,255,0.9);
      border-radius: 50%; position: absolute; z-index: 10; pointer-events: none;
      transform: translate(-50%, -50%); transition: transform 0.2s, background-color 0.2s;
      box-shadow: 0 0 10px rgba(174,0,255,0.7);
    }
    @media (pointer: coarse) { #cursor-dot { display: none; } }
    .instructions {
      position: absolute; top: 10px; left: 10px; color: #fff; font-family: sans-serif; font-size: 14px;
      background: rgba(0,0,0,0.5); padding: 8px; border-radius: 4px; line-height: 1.4;
    }
  </style>
</head>
<body>
  <canvas id="canvas"></canvas>
  <div id="cursor-dot"></div>
  <div class="instructions">
    Use arrows ↑ ↓ To move the car up and down<br/>
    Use PageUp/PageDown to zoom in/out camera
    Telegram : @aaka8h
  </div>

  <script type="importmap">
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.165.0/build/three.module.js",
        "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.165.0/examples/jsm/"
      }
    }
  </script>

  <script type="module">
    import * as THREE from 'three';
    import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
    import { FontLoader } from 'three/addons/loaders/FontLoader.js';
    import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
    import { TextGeometry } from 'three/addons/geometries/TextGeometry.js';
    import { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';
    import { RenderPass } from 'three/addons/postprocessing/RenderPass.js';
    import { UnrealBloomPass } from 'three/addons/postprocessing/UnrealBloomPass.js';

    let scene, camera, renderer, controls, composer;
    let darkTextMesh, telegramTextMesh, loadingMesh, carModel;

    
    
    const minCarY = -6.5, maxCarY = -2.5;
    const minZoom = 3, maxZoom = 40;

    init();
    animate();

    function init() {
      scene = new THREE.Scene();
      camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 1000);
      camera.position.set(0, 1, 6);

      renderer = new THREE.WebGLRenderer({ canvas: document.getElementById('canvas'), antialias: true, alpha: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(window.devicePixelRatio);

      controls = new OrbitControls(camera, renderer.domElement);
      controls.enableDamping = true;
      controls.dampingFactor = 0.03;
      controls.minDistance = minZoom;
      controls.maxDistance = maxZoom;
      controls.maxPolarAngle = Math.PI / 1.5;

      scene.add(new THREE.AmbientLight(0xffffff, 0.1));
      const p1 = new THREE.PointLight(0xae00ff, 5, 50);
      p1.position.set(2,2,2); scene.add(p1);
      const p2 = new THREE.PointLight(0x00aeff, 3, 50);
      p2.position.set(-2,-2,2); scene.add(p2);
      const dir = new THREE.DirectionalLight(0xffffff, 0.2);
      dir.position.set(0,5,0); scene.add(dir);

      createStarfield();
      loadText();
      createLoadingBadge();
      loadCar();

      setupPostProcessing();

      window.addEventListener('resize', onWindowResize);
      window.addEventListener('mousemove', onMouseMove);
      window.addEventListener('keydown', onKeyDown);
    }

    function createStarfield() {
      const geom = new THREE.BufferGeometry();
      const verts = [];
      for (let i = 0; i < 20000; i++) verts.push(THREE.MathUtils.randFloatSpread(300));
      geom.setAttribute('position', new THREE.Float32BufferAttribute(verts, 3));
      scene.add(new THREE.Points(geom, new THREE.PointsMaterial({ color: 0x8888ff, size: 0.07, transparent: true, opacity: 0.7 })));
    }

    function loadText() {
      new FontLoader().load('https://threejs.org/examples/fonts/helvetiker_bold.typeface.json', font => {
        const cfg = { font, size: 0.8, height: 0.2, bevelEnabled: true, bevelThickness: 0.03, bevelSize: 0.02, bevelSegments: 8, curveSegments: 12 };
        const mat = new THREE.MeshPhysicalMaterial({ color: 0xffffff, metalness: 1, roughness: 0.1, clearcoat: 1, clearcoatRoughness: 0.1, emissive: 0x440044, emissiveIntensity: 0.8 });

        const darkGeo = new TextGeometry('sonic', cfg);
        darkGeo.center();
        darkTextMesh = new THREE.Mesh(darkGeo, mat);
        darkTextMesh.position.y = 1.5;
        darkGeo.computeBoundingBox();
        scene.add(darkTextMesh);

        const tgCfg = { font, size: 0.2, height: 0.1, bevelEnabled: true, bevelThickness: 0.02, bevelSize: 0.01, bevelSegments: 6, curveSegments: 12 };
        const tgGeo = new TextGeometry('Telegram : @sonictar', tgCfg);
        tgGeo.center();
        telegramTextMesh = new THREE.Mesh(tgGeo, mat.clone());
        telegramTextMesh.position.y = 0.5;
        scene.add(telegramTextMesh);
      });
    }

    function createLoadingBadge() {
      const geom = new THREE.TorusGeometry(0.5, 0.2, 16, 100);
      const mat = new THREE.MeshPhysicalMaterial({ color: 0xffffff, metalness: 0.5, roughness: 0.2, emissive: 0x220022, emissiveIntensity: 1 });
      loadingMesh = new THREE.Mesh(geom, mat);
      loadingMesh.position.set(0, -3, 0);
      scene.add(loadingMesh);
    }

    function loadCar() {
      new GLTFLoader().load('https://h2vnpxcqo7.ufs.sh/f/zcilQcwZgfoRpQs4DwGAKqGa5wYXu2cb4vBlrkoCenSRLyJp', gltf => {
        scene.remove(loadingMesh);
        carModel = gltf.scene;
        carModel.scale.set(1.6, 1.6, 1.6);
        carModel.position.set(0, -4.4, 0);
        carModel.rotation.x = 0.35;
        scene.add(carModel);
      });
    }

    function onKeyDown(e) {
      if (!carModel) return;
      const delta = 0.2;
      if (e.key === 'ArrowUp')    carModel.position.y = Math.min(carModel.position.y + delta, maxCarY);
      if (e.key === 'ArrowDown')  carModel.position.y = Math.max(carModel.position.y - delta, minCarY);
      if (e.key === 'PageUp')     controls.maxDistance = Math.min(controls.maxDistance + 2, maxZoom);
      if (e.key === 'PageDown')   controls.maxDistance = Math.max(controls.maxDistance - 2, minZoom);
    }

    function setupPostProcessing() {
      composer = new EffectComposer(renderer);
      composer.addPass(new RenderPass(scene, camera));
      composer.addPass(new UnrealBloomPass(new THREE.Vector2(window.innerWidth, window.innerHeight), 1.5, 0.4, 0.3));
    }

    function onWindowResize() {
      camera.aspect = window.innerWidth/window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
      composer.setSize(window.innerWidth, window.innerHeight);
    }

    function onMouseMove(e) {
      const dot = document.getElementById('cursor-dot');
      dot.style.left = e.clientX + 'px';
      dot.style.top  = e.clientY + 'px';
    }

    function animate() {
      requestAnimationFrame(animate);

      if (loadingMesh) loadingMesh.rotation.x += 0.02;

      if (darkTextMesh && telegramTextMesh) {
        const t = Date.now() * 0.0001 % 1;
        const col = new THREE.Color().setHSL(t, 1, 0.5).multiplyScalar(0.3);
        darkTextMesh.material.emissive.copy(col);
        telegramTextMesh.material.emissive.copy(col);
      }

      controls.update();
      composer.render();
    }
  </script>
</body>
</html>
